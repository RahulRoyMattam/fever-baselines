# Small Scale Implementation of the FEVER baseline

This project evaluates the Fact Extraction and VERification baseline described in the NAACL2018 paper: [FEVER: A large-scale dataset for Fact Extraction and VERification.]()

The baseline model constists of two components: Evidence Retrieval (DrQA) + Textual Entailment (Decomposable Attention).

This project runs the baseline on a miniature dataset of 10,000 claims derieved from the original FEVER dataset. The original fever dataset consists of 185,441 claims generated by altering sentences extracted from Wikipedia and subsequently verified without knowledge of the sentence they were derived from. The claims are classified as Supported, Refuted or NotEnoughInfo by annotators achieving 0.6841 in Fleiss Îº.  

The baseline on the original FEVER dataset achieves a best accuracy of 31.87% on labeling a claim accompanied by the correct evidence, while if we ignore the evidence the baseline achieve 50.91%.
 
## Training Environment Specifications

This baseline was tested and evaluated using the Python 3.6 version of Anaconda 5.0.1 which can be downloaded from [anaconda.com](https://www.anaconda.com/download/). 

The baseline was trained and evaluated in a Docker container running on a Ubuntu 16.04 server. Training was performed on a system with no GPU support and took two hours and thirty minutes to complete.

## Evaluation Environment Specifications

The model was evaluated in a Docker container hosted on a Linux server without a GPU.
 
## Evaluate on Docker

Step 1 : Setup the docker container

a) use docker image of this repository pushed to [rahulroymattam@hub.docker.com](https://hub.docker.com/r/rahulroymattam/fever-baseline/)

```
#get docker image
sudo docker run -it -v fever-eval:/fever/data/ rahulroymattam/fever-baseline:small
#get fever.db
wget -O /fever/data/fever/fever.db https://s3-eu-west-1.amazonaws.com/fever.public/wiki_index/fever.db
```
or 

b) build docker image from the Dockerfile

```
git clone https://github.com/RahulRoyMattam/fever-baselines.git
cd fever-baselines
sudo docker build -t fever-image .

sudo docker run -it -v fever-eval:/fever/data fever-image
```

Step 2: Run following scripts in the docker container to run the model against the Dev and Test sets and view confusion matrices.

```
#run oracle evaluation of label prediction on dev set
PYTHONPATH=src python src/scripts/rte/da/eval_da.py data/fever/fever.db data/models/decomposable_attention.tar.gz data/fever/dev.ns.pages.p1.jsonl

#run oracle evaluation of label prediction on test set
PYTHONPATH=src python src/scripts/rte/da/eval_da.py data/fever/fever.db data/models/decomposable_attention.tar.gz data/fever/dev.ns.pages.p1.jsonl

#run evidence retrieval evaluation on dev Set
PYTHONPATH=src python src/scripts/rte/da/eval_da.py data/fever/fever.db data/models/decomposable_attention.tar.gz data/fever/dev.sentences.p5.s5.jsonl
    
#run evidence retrieval evaluation on test set
PYTHONPATH=src python src/scripts/rte/da/eval_da.py data/fever/fever.db data/models/decomposable_attention.tar.gz data/fever/test.sentences.p5.s5.jsonl
```

## Find Out More

 * Visit [http://fever.ai](http://fever.ai) to find out more about the shared task and download the data.
